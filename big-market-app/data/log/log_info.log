25-12-04.12:26:29.312 [main            ] INFO  CreditAdjustService    - Starting CreditAdjustService using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 27996 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:26:29.314 [main            ] INFO  CreditAdjustService    - The following 1 profile is active: "dev"
25-12-04.12:26:31.161 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:26:31.173 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:26:31.272 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 0 Redis repository interfaces.
25-12-04.12:26:35.676 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:26:36.889 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:26:36.908 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:26:44.147 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.12:26:44.354 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:26:44.565 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#54be6213:0/SimpleConnection@3149409c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55397]
25-12-04.12:26:44.818 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:26:44.826 [main            ] INFO  CreditAdjustService    - Started CreditAdjustService in 16.355 seconds (JVM running for 18.311)
25-12-04.12:26:44.851 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:26:44.853 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:26:44.855 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:26:45.427 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:26:45.427 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:26:45.807 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:26:45.807 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:26:45.892 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:26:46.649 [main            ] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:REBATE amount:10.19
25-12-04.12:26:47.616 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:26:47.616 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:26:47.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:27:00.863 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 27364 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:27:00.866 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
25-12-04.12:27:02.772 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:27:02.781 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:27:02.876 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 0 Redis repository interfaces.
25-12-04.12:27:06.594 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:27:07.585 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:27:07.601 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:27:14.365 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.12:27:14.602 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:27:14.794 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#54be6213:0/SimpleConnection@3149409c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64134]
25-12-04.12:27:15.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:27:15.205 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 15.041 seconds (JVM running for 16.762)
25-12-04.12:27:16.212 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:41:27.153 [main            ] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:REBATE amount:10.19
25-12-04.12:41:45.804 [AMQP Connection 127.0.0.1:5672] ERROR ForgivingExceptionHandler - An unexpected connection driver error occurred
java.net.SocketException: Software caused connection abort: recv failed
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.socketRead(SocketInputStream.java:116)
	at java.net.SocketInputStream.read(SocketInputStream.java:171)
	at java.net.SocketInputStream.read(SocketInputStream.java:141)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:246)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:265)
	at java.io.DataInputStream.readUnsignedByte(DataInputStream.java:288)
	at com.rabbitmq.client.impl.Frame.readFrom(Frame.java:91)
	at com.rabbitmq.client.impl.SocketFrameHandler.readFrame(SocketFrameHandler.java:184)
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:665)
	at java.lang.Thread.run(Thread.java:750)
25-12-04.12:41:49.269 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@7028b5cc: tags=[[amq.ctag-knd0N8nLCXGVJBdg5SLKEg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@4b5aa48b Shared Rabbit Connection: SimpleConnection@3149409c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64134], acknowledgeMode=AUTO local queue size=0
25-12-04.12:41:49.620 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@5e46a125: tags=[[amq.ctag-YQEeUU00L36u1xFwUh3RJQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,2), conn: Proxy@4b5aa48b Shared Rabbit Connection: SimpleConnection@3149409c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64134], acknowledgeMode=AUTO local queue size=0
25-12-04.12:41:54.836 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:41:59.310 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#54be6213:1/SimpleConnection@7eee710a [delegate=amqp://admin@127.0.0.1:5672/, localPort= 52073]
25-12-04.12:43:15.992 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:43:15.992 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:45:24.016 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x00484adf, L:/127.0.0.1:64131 - R:127.0.0.1/127.0.0.1:6379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://127.0.0.1:6379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-12-04.12:45:26.497 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:45:26.497 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:45:26.497 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:45:46.394 [main            ] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:568795013545
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909911' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app\target\classes\mybatis\mapper\user_credit_order_mapper.xml]
### The error may involve cn.bugstack.infrastructure.dao.IUserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909911' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '100009909911' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909911' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy150.insert(Unknown Source)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:73)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:64)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository$$FastClassBySpringCGLIB$$6938ad14.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository$$EnhancerBySpringCGLIB$$5046ff84.saveUserCreditTradeOrder(<generated>)
	at cn.bugstack.domain.credit.service.CreditAdjustService.createOrder(CreditAdjustService.java:45)
	at cn.bugstack.test.domain.credit.CreditAdjustServiceTest.test_createOrder_forward(CreditAdjustServiceTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909911' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy196.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 54 common frames omitted
25-12-04.12:45:46.627 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:45:46.629 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:45:46.629 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:45:46.630 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:45:46.691 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"076298194854","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.692,"userId":"user003"},"userId":"user003"}
25-12-04.12:45:47.153 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:45:47.153 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-3] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:45:47.156 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:45:47.158 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:45:47.158 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:24.926 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 28016 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:46:24.927 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
25-12-04.12:46:26.756 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:46:26.769 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:46:26.875 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 74 ms. Found 0 Redis repository interfaces.
25-12-04.12:46:30.135 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:46:31.100 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:31.144 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:34.362 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 5860 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:46:34.363 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
25-12-04.12:46:35.767 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:46:35.774 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:46:35.860 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 63 ms. Found 0 Redis repository interfaces.
25-12-04.12:46:37.456 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:46:37.989 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:38.019 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:41.804 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.12:46:41.908 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:46:42.018 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#352f6727:0/SimpleConnection@67ecf7ed [delegate=amqp://admin@127.0.0.1:5672/, localPort= 59482]
25-12-04.12:46:42.145 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:46:42.153 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 8.392 seconds (JVM running for 9.648)
25-12-04.12:46:42.161 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:42.163 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:42.165 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:42.427 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:46:42.433 [main            ] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:REBATE amount:10.19
25-12-04.12:46:42.474 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:46:42.802 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:46:42.803 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:46:43.111 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:43.122 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:43.333 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"076298194854","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.312,"userId":"user003"},"userId":"user003"}
25-12-04.12:46:43.442 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:43.444 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:43.444 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:43.444 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:46.478 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 2888 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:46:46.479 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
25-12-04.12:46:47.883 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:46:47.889 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:46:47.978 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 0 Redis repository interfaces.
25-12-04.12:46:49.890 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:46:50.539 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:50.567 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:46:54.292 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.12:46:54.390 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:46:54.463 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#352f6727:0/SimpleConnection@67ecf7ed [delegate=amqp://admin@127.0.0.1:5672/, localPort= 65534]
25-12-04.12:46:54.552 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:46:54.560 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 8.597 seconds (JVM running for 9.697)
25-12-04.12:46:54.811 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:46:54.811 [main            ] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:REBATE amount:10.19
25-12-04.12:46:54.853 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:46:55.055 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:46:55.184 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:46:55.184 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:46:55.184 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:46:55.338 [main            ] ERROR CreditRepository       - 调整账户积分额度异常，唯一索引冲突 userId:xiaofuge orderId:469012640609
org.springframework.dao.DuplicateKeyException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909912' for key 'user_credit_order_001.uq_out_business_no'
### The error may exist in file [C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app\target\classes\mybatis\mapper\user_credit_order_mapper.xml]
### The error may involve cn.bugstack.infrastructure.dao.IUserCreditOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_credit_order_001(user_id, order_id, trade_name, trade_type, trade_amount, out_business_no, create_time, update_time)         values(                   ?,?,?,?,?,?,now(),now()               )
### Cause: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909912' for key 'user_credit_order_001.uq_out_business_no'
; Duplicate entry '100009909912' for key 'user_credit_order_001.uq_out_business_no'; nested exception is java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909912' for key 'user_credit_order_001.uq_out_business_no'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:247)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy112.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy152.insert(Unknown Source)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository.lambda$saveUserCreditTradeOrder$0(CreditRepository.java:73)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository.saveUserCreditTradeOrder(CreditRepository.java:64)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository$$FastClassBySpringCGLIB$$6938ad14.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.CreditRepository$$EnhancerBySpringCGLIB$$e0b96e34.saveUserCreditTradeOrder(<generated>)
	at cn.bugstack.domain.credit.service.CreditAdjustService.createOrder(CreditAdjustService.java:45)
	at cn.bugstack.test.domain.credit.CreditAdjustServiceTest.test_createOrder_forward(CreditAdjustServiceTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Duplicate entry '100009909912' for key 'user_credit_order_001.uq_out_business_no'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy209.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 54 common frames omitted
25-12-04.12:46:55.388 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"076298194854","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.924,"userId":"user003"},"userId":"user003"}
25-12-04.12:46:55.505 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:46:55.518 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"076298194854","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.0650,"userId":"user003"},"userId":"user003"}
25-12-04.12:46:55.531 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:55.536 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:55.536 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:55.537 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:46:55.546 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:55.676 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:46:55.679 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:55.680 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:46:55.680 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:47:00.844 [main            ] INFO  CreditAdjustServiceTest - Starting CreditAdjustServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 15804 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.12:47:00.845 [main            ] INFO  CreditAdjustServiceTest - The following 1 profile is active: "dev"
25-12-04.12:47:02.324 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.12:47:02.331 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.12:47:02.401 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 0 Redis repository interfaces.
25-12-04.12:47:04.080 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.12:47:04.625 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:47:04.644 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.12:47:08.196 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.12:47:08.295 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.12:47:08.378 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#10dfa7ef:0/SimpleConnection@103bcc9f [delegate=amqp://admin@127.0.0.1:5672/, localPort= 49288]
25-12-04.12:47:08.488 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-04.12:47:08.494 [main            ] INFO  CreditAdjustServiceTest - Started CreditAdjustServiceTest in 8.2 seconds (JVM running for 9.223)
25-12-04.12:47:08.733 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:47:08.741 [main            ] INFO  CreditAdjustService    - 增加账户积分额度开始 userId:xiaofuge tradeName:REBATE amount:-10.19
25-12-04.12:47:08.787 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:47:09.074 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:47:09.074 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:47:09.486 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:47:09.488 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:47:09.490 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.12:47:09.498 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"076298194854","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.546,"userId":"user003"},"userId":"user003"}
25-12-04.12:47:09.632 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:47:10.027 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.12:47:10.079 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.12:47:10.474 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:47:10.489 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.12:47:10.492 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:47:10.493 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.12:47:10.493 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.21:37:28.866 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 27660 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.21:37:28.866 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-12-04.21:37:34.291 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.21:37:34.297 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.21:37:34.404 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 76 ms. Found 0 Redis repository interfaces.
25-12-04.21:37:36.521 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.21:37:37.477 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.21:37:37.495 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.21:37:41.845 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.21:37:41.959 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.21:37:42.078 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#4536a715:0/SimpleConnection@5c13af01 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53110]
25-12-04.21:37:42.736 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 14.416 seconds (JVM running for 17.125)
25-12-04.21:37:43.094 [main            ] INFO  RaffleActivityController - 活动装配，数据预热，开始 activityId:100301
25-12-04.21:37:43.144 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.21:37:44.598 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.21:37:44.696 [main            ] ERROR RaffleActivityController - 活动装配，数据预热，失败 activityId:100301
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'product_amount' in 'field list'
### The error may exist in file [C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app\target\classes\mybatis\mapper\raffle_activity_sku_mapper.xml]
### The error may involve cn.bugstack.infrastructure.dao.IRaffleActivitySkuDao.queryActivitySkuListByActivityId-Inline
### The error occurred while setting parameters
### SQL: select sku, activity_count_id, stock_count, stock_count_surplus, product_amount from raffle_activity_sku         where activity_id = ?
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'product_amount' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'product_amount' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:239)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy112.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy114.queryActivitySkuListByActivityId(Unknown Source)
	at cn.bugstack.infrastructure.adapter.repository.ActivityRepository.queryActivitySkuByActivityId(ActivityRepository.java:505)
	at cn.bugstack.infrastructure.adapter.repository.ActivityRepository$$FastClassBySpringCGLIB$$2c08996a.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$3a7ed53e.queryActivitySkuByActivityId(<generated>)
	at cn.bugstack.domain.activity.service.armory.ActivityArmory.assembleActivitySkuByActivityId(ActivityArmory.java:20)
	at cn.bugstack.trigger.http.RaffleActivityController.armory(RaffleActivityController.java:82)
	at cn.bugstack.test.trigger.RaffleActivityControllerTest.test_armory(RaffleActivityControllerTest.java:32)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)
	at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'product_amount' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:64)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:79)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy209.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:63)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:325)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:156)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:109)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:89)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:140)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 54 common frames omitted
25-12-04.21:37:45.000 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0001","info":"未知失败"}
25-12-04.21:37:45.018 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.21:37:45.019 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.21:37:45.020 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.21:37:45.022 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.21:37:45.025 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.21:37:45.026 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.21:37:45.048 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.21:37:45.050 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.21:37:45.713 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.21:37:45.719 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.21:37:45.735 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.21:37:45.750 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.21:37:45.760 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.21:37:45.762 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.21:37:45.763 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.21:37:45.763 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:19:51.216 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 33968 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:19:51.217 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:19:54.335 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:19:54.343 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:19:54.433 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 61 ms. Found 0 Redis repository interfaces.
25-12-04.22:19:56.517 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:19:57.621 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:19:57.655 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:20:02.221 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:20:02.340 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:20:02.475 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@4aba7617 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51412]
25-12-04.22:20:02.627 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 12.033 seconds (JVM running for 13.423)
25-12-04.22:20:02.984 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:20:03.454 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:20:03.933 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:20:03.992 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:20:03.992 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:20:04.001 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:20:04.069 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:20:04.105 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:20:04.643 [main            ] ERROR ActivityRepository     - 写入订单记录，唯一索引冲突 userId：xiaofuge, activityId：100301, sku：9011
25-12-04.22:20:05.021 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:20:05.067 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:20:05.069 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:05.070 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:05.074 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:05.077 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:05.608 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:05.618 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:05.617 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:05.647 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:05.651 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:05.652 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:05.652 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:05.652 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:36.082 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 26932 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:20:36.083 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:20:37.758 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:20:37.764 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:20:37.850 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 58 ms. Found 0 Redis repository interfaces.
25-12-04.22:20:39.826 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:20:41.164 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:20:41.208 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:20:46.120 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:20:46.250 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:20:46.359 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@86bf90b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53736]
25-12-04.22:20:46.509 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 10.999 seconds (JVM running for 12.128)
25-12-04.22:20:46.826 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:20:47.613 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:20:47.940 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:20:47.956 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:20:47.956 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:20:47.965 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:20:48.028 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:20:48.105 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:20:48.662 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：842973933727
25-12-04.22:20:48.688 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:48.690 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:48.693 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:48.695 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:20:49.475 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:49.484 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:49.502 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:49.517 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:20:49.522 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:49.523 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:49.523 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:20:49.523 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:22:00.140 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 36872 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:22:00.142 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:22:01.822 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:22:01.828 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:22:01.921 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 70 ms. Found 0 Redis repository interfaces.
25-12-04.22:22:04.244 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:22:05.576 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:22:05.608 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:22:10.665 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:22:10.792 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:22:11.075 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@86bf90b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 58409]
25-12-04.22:22:11.251 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 11.71 seconds (JVM running for 12.922)
25-12-04.22:22:11.628 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:22:13.393 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:22:13.621 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:22:13.865 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:22:13.866 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:22:13.876 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:22:13.942 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:22:14.274 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:22:15.006 [scheduling-1    ] INFO  UpdateActivitySkuStock - 定时任务，更新活动sku库存 sku:9011 activityId:100301
25-12-04.22:22:18.908 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：488014999903
25-12-04.22:22:18.934 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:22:18.937 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:22:18.940 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:22:18.942 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:22:19.263 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:22:19.264 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:22:19.296 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:22:19.298 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:22:19.306 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:22:19.310 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:22:19.310 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:22:19.310 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:23:07.363 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 37756 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:23:07.364 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:23:09.143 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:23:09.150 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:23:09.247 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 64 ms. Found 0 Redis repository interfaces.
25-12-04.22:23:11.274 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:23:12.309 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:23:12.339 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:23:16.330 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:23:16.461 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:23:16.585 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#7e848aea:0/SimpleConnection@5d8fd077 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 58682]
25-12-04.22:23:16.724 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 10.008 seconds (JVM running for 11.259)
25-12-04.22:23:17.057 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:23:19.108 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:23:19.888 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:23:20.029 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:23:20.029 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:23:20.031 [scheduling-1    ] INFO  UpdateActivitySkuStock - 定时任务，更新活动sku库存 sku:9011 activityId:100301
25-12-04.22:23:20.420 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:23:20.421 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:23:20.432 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:23:25.011 [scheduling-1    ] INFO  UpdateActivitySkuStock - 定时任务，更新活动sku库存 sku:9011 activityId:100301
25-12-04.22:23:26.488 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:23:26.488 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:23:35.014 [scheduling-1    ] INFO  UpdateActivitySkuStock - 定时任务，更新活动sku库存 sku:9011 activityId:100301
25-12-04.22:23:43.580 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：670223738802
25-12-04.22:24:21.903 [pool-3-thread-19] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@636ebaf6 (Communications link failure

The last packet successfully received from the server was 9,977 milliseconds ago. The last packet sent successfully to the server was 20,015 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:24:21.903 [pool-3-thread-20] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7d29eeb (Communications link failure

The last packet successfully received from the server was 9,977 milliseconds ago. The last packet sent successfully to the server was 20,016 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:24:30.692 [pool-3-thread-3 ] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@10a11874 (Communications link failure

The last packet successfully received from the server was 34,821 milliseconds ago. The last packet sent successfully to the server was 35,469 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:24:30.692 [pool-3-thread-4 ] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@7d77e88 (Communications link failure

The last packet successfully received from the server was 34,821 milliseconds ago. The last packet sent successfully to the server was 35,469 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:24:38.877 [pool-3-thread-6 ] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@189aebc2 (Communications link failure

The last packet successfully received from the server was 26,044 milliseconds ago. The last packet sent successfully to the server was 29,236 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:24:38.879 [pool-3-thread-5 ] WARN  PoolBase               - Retail_HikariCP - Failed to validate connection com.mysql.cj.jdbc.ConnectionImpl@12525650 (Communications link failure

The last packet successfully received from the server was 26,044 milliseconds ago. The last packet sent successfully to the server was 29,236 milliseconds ago.). Possibly consider using a shorter maxLifetime value.
25-12-04.22:25:38.548 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:25:38.552 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:25:38.555 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:25:38.559 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:25:38.850 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:25:38.850 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:25:38.943 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:25:38.944 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:25:38.948 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:25:38.948 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:25:38.948 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:25:38.948 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:33:01.031 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 32424 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:33:01.032 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:33:02.423 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:33:02.426 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:33:02.500 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 0 Redis repository interfaces.
25-12-04.22:33:04.067 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:33:05.325 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:33:05.351 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:33:09.262 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:33:09.366 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:33:09.496 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@86bf90b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 52546]
25-12-04.22:33:09.636 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 9.171 seconds (JVM running for 10.291)
25-12-04.22:33:09.961 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:33:10.045 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:33:10.045 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:33:10.534 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:33:10.534 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:33:10.535 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:33:10.812 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:33:10.829 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:33:10.829 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:33:10.840 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:33:11.795 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：636004376185
25-12-04.22:33:11.821 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:33:11.824 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:33:11.826 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:33:11.828 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:33:12.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:33:12.607 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:33:12.633 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:33:12.633 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:33:12.639 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:33:12.639 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:33:12.639 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:33:12.639 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:07.306 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 35960 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:34:07.307 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:34:08.839 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:34:08.845 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:34:08.929 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 0 Redis repository interfaces.
25-12-04.22:34:10.785 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:34:11.703 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:34:11.731 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:34:15.361 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:34:15.494 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:34:15.625 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@5c13af01 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 52424]
25-12-04.22:34:15.748 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 8.993 seconds (JVM running for 10.053)
25-12-04.22:34:16.069 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:34:16.389 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:34:16.604 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:34:16.620 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:34:16.620 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:34:16.629 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:34:16.684 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:34:16.717 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:34:16.820 [main            ] ERROR ActivityRepository     - 写入订单记录，唯一索引冲突 userId：xiaofuge, activityId：100301, sku：9011
25-12-04.22:34:16.983 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:16.985 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:16.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:16.989 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:17.741 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:17.742 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:17.744 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:17.760 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:17.772 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:17.773 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:17.773 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:17.773 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:37.205 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Starting RaffleActivityAccountQuotaServiceTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 37568 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-04.22:34:37.207 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - The following 1 profile is active: "dev"
25-12-04.22:34:38.633 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-04.22:34:38.641 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-04.22:34:38.729 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 0 Redis repository interfaces.
25-12-04.22:34:40.398 [main            ] INFO  Version                - Redisson 3.23.4
25-12-04.22:34:41.310 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:34:41.336 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-04.22:34:45.048 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-04.22:34:45.147 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-04.22:34:45.240 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52ca0ad4:0/SimpleConnection@86bf90b [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64342]
25-12-04.22:34:45.398 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - Started RaffleActivityAccountQuotaServiceTest in 8.738 seconds (JVM running for 9.895)
25-12-04.22:34:45.768 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:34:46.143 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:34:46.258 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 装配活动：true
25-12-04.22:34:46.277 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态、库存(sku)】校验开始.sku：9011 activityId: 100301
25-12-04.22:34:46.277 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【有效期、状态、库存(sku)】开始。sku:9011 activityId:100301
25-12-04.22:34:46.288 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理 【有效期、状态、库存(sku)】成功。sku:9011 activityId:100301
25-12-04.22:34:46.347 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-04.22:34:46.379 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-04.22:34:46.783 [main            ] INFO  RaffleActivityAccountQuotaServiceTest - 测试结果：621730370344
25-12-04.22:34:46.804 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:46.807 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:46.809 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:46.812 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-04.22:34:47.368 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:47.374 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:47.389 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:47.403 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#3-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-04.22:34:47.411 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:47.412 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:47.413 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-04.22:34:47.413 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
