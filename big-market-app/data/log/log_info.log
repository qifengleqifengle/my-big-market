25-12-03.20:34:24.942 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 61732 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-03.20:34:24.945 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-12-03.20:34:30.455 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-03.20:34:30.463 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-03.20:34:30.575 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 77 ms. Found 0 Redis repository interfaces.
25-12-03.20:34:33.743 [main            ] INFO  Version                - Redisson 3.23.4
25-12-03.20:34:34.819 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.20:34:34.838 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.20:34:43.401 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-03.20:34:43.660 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.20:34:43.884 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#472c9f88:0/SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64877]
25-12-03.20:34:44.308 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 20.203 seconds (JVM running for 24.382)
25-12-03.20:34:45.508 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.20:34:45.509 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.20:37:37.253 [main            ] INFO  RaffleActivityController - 活动抽奖 userId：user003 activityId：100301
25-12-03.20:38:29.214 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.20:38:29.214 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.20:40:05.428 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m5s696ms990µs800ns).
25-12-03.20:40:05.429 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m5s697ms397µs).
25-12-03.20:42:06.829 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=47s62ms236µs400ns).
25-12-03.20:42:06.829 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=47s62ms127µs100ns).
25-12-03.20:43:05.238 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=58s409ms385µs100ns).
25-12-03.20:43:05.238 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=58s409ms447µs900ns).
25-12-03.20:43:59.381 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=54s143ms554µs600ns).
25-12-03.20:43:59.381 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=54s143ms647µs500ns).
25-12-03.20:43:59.380 [scheduling-1    ] ERROR TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0x23df8bb5, L:/127.0.0.1:61628 - R:127.0.0.1/127.0.0.1:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0x23df8bb5, L:/127.0.0.1:61628 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.StrategyRepository$$EnhancerBySpringCGLIB$$d0593789.takeQueueValue(<generated>)
	at cn.bugstack.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:64)
	at cn.bugstack.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:21)
	at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0x23df8bb5, L:/127.0.0.1:61628 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:407)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
25-12-03.20:44:04.989 [scheduling-1    ] ERROR TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.StrategyRepository$$EnhancerBySpringCGLIB$$d0593789.takeQueueValue(<generated>)
	at cn.bugstack.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:64)
	at cn.bugstack.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:21)
	at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:407)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
25-12-03.20:44:15.278 [scheduling-1    ] ERROR TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xec882a9e, L:/127.0.0.1:61623 - R:127.0.0.1/127.0.0.1:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xec882a9e, L:/127.0.0.1:61623 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.StrategyRepository$$EnhancerBySpringCGLIB$$d0593789.takeQueueValue(<generated>)
	at cn.bugstack.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:64)
	at cn.bugstack.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:21)
	at sun.reflect.GeneratedMethodAccessor23.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [strategy_award_count_queue_key], channel: [id: 0xec882a9e, L:/127.0.0.1:61623 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:407)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
25-12-03.20:45:21.315 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=48s772ms509µs500ns).
25-12-03.20:45:21.315 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=48s772ms512µs600ns).
25-12-03.20:50:23.449 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=5m2s139ms198µs400ns).
25-12-03.20:50:23.449 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=5m2s139ms254µs500ns).
25-12-03.20:50:23.457 [redisson-timer-4-1] ERROR PingConnectionHandler  - Unable to send PING command over channel: [id: 0x23df8bb5, L:/127.0.0.1:61628 - R:127.0.0.1/127.0.0.1:6379]
org.redisson.client.RedisTimeoutException: Command execution timeout for command: (PING), params: [], Redis client: [addr=redis://127.0.0.1:6379]
	at org.redisson.client.RedisConnection.lambda$async$0(RedisConnection.java:256)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-12-03.21:12:44.057 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=22m20s624ms390µs700ns).
25-12-03.21:12:44.057 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=22m20s624ms407µs800ns).
25-12-03.21:12:44.496 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@771cbd13: tags=[[amq.ctag-C8fE7L_aBjOYNFsatQTr8Q]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,3), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64877], acknowledgeMode=AUTO local queue size=0
25-12-03.21:12:44.512 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@6ffdbeef: tags=[[amq.ctag-XwrTaJtwKuwq0u-swQhEIw]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64877], acknowledgeMode=AUTO local queue size=0
25-12-03.21:12:44.933 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SimpleMessageListenerContainer - Restarting Consumer@35555145: tags=[[amq.ctag-1Sl5aYA63h5YANyGA2gSDw]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,2), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 64877], acknowledgeMode=AUTO local queue size=0
25-12-03.21:12:45.707 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.21:12:46.925 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#472c9f88:1/SimpleConnection@1264559 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53915]
25-12-03.21:16:59.059 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m13s363ms887µs300ns).
25-12-03.21:16:59.059 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m13s364ms924µs900ns).
25-12-03.21:16:59.069 [scheduling-1    ] ERROR UpdateActivitySkuStock - 定时任务，更新活动sku库存失败
org.springframework.dao.QueryTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [activity_sku_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]; nested exception is org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [activity_sku_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:48)
	at org.redisson.spring.data.connection.RedissonExceptionConverter.convert(RedissonExceptionConverter.java:35)
	at org.springframework.data.redis.PassThroughExceptionTranslationStrategy.translate(PassThroughExceptionTranslationStrategy.java:44)
	at org.redisson.spring.data.connection.RedissonConnectionFactory.translateExceptionIfPossible(RedissonConnectionFactory.java:91)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.bugstack.infrastructure.adapter.repository.ActivityRepository$$EnhancerBySpringCGLIB$$e5556edd.takeQueueValue(<generated>)
	at cn.bugstack.domain.activity.service.quota.RaffleActivityAccountQuotaService.takeQueueValue(RaffleActivityAccountQuotaService.java:57)
	at cn.bugstack.trigger.job.UpdateActivitySkuStock.exec(UpdateActivitySkuStock.java:21)
	at sun.reflect.GeneratedMethodAccessor25.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:266)
	at java.util.concurrent.FutureTask.run(FutureTask.java)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
Caused by: org.redisson.client.RedisResponseTimeoutException: Redis server response timeout (3000 ms) occured after 0 retry attempts, is non-idempotent command: true Check connection with Redis node: 127.0.0.1/127.0.0.1:6379 for TCP packet drops or bandwidth limits.  Try to increase nettyThreads and/or timeout settings. Command: (LPOP), params: [activity_sku_count_queue_key], channel: [id: 0xdc4db79c, L:/127.0.0.1:61627 - R:127.0.0.1/127.0.0.1:6379]
	at org.redisson.command.RedisExecutor.lambda$scheduleResponseTimeout$9(RedisExecutor.java:407)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.run(HashedWheelTimer.java:715)
	at io.netty.util.concurrent.ImmediateExecutor.execute(ImmediateExecutor.java:34)
	at io.netty.util.HashedWheelTimer$HashedWheelTimeout.expire(HashedWheelTimer.java:703)
	at io.netty.util.HashedWheelTimer$HashedWheelBucket.expireTimeouts(HashedWheelTimer.java:790)
	at io.netty.util.HashedWheelTimer$Worker.run(HashedWheelTimer.java:503)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	... 1 common frames omitted
25-12-03.21:17:21.403 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@70359d27: tags=[[amq.ctag-fLz_q4pN5V0zF2nIXAlSVg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@1264559 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53915], acknowledgeMode=AUTO local queue size=0
25-12-03.21:17:21.402 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@1ae66dca: tags=[[amq.ctag-Gt8ptOKYPytPW6HR14w7_g]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,3), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@1264559 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53915], acknowledgeMode=AUTO local queue size=0
25-12-03.21:17:21.404 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Restarting Consumer@19a43c2: tags=[[amq.ctag-f374R-6uMjv7U5RbZlMHvA]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,2), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@1264559 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 53915], acknowledgeMode=AUTO local queue size=0
25-12-03.21:17:21.409 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-3] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.21:17:21.425 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-黑名单开始 userId: user003 strategyId:100006 ruleModel:rule_blacklist
25-12-03.21:17:21.427 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-3] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#472c9f88:2/SimpleConnection@676e339f [delegate=amqp://admin@127.0.0.1:5672/, localPort= 57644]
25-12-03.21:17:21.549 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:17:22.117 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:17:22.271 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-黑名单命中 userId: user003 strategyId:100006 ruleModel: rule_blacklist awardId:101
25-12-03.21:17:22.277 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100006 rule_blacklist 101
25-12-03.21:18:47.564 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m48s506ms230µs500ns).
25-12-03.21:18:47.563 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m25s342ms762µs100ns).
25-12-03.21:18:47.563 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m48s505ms753µs500ns).
25-12-03.21:19:23.820 [main            ] INFO  EventPublisher         - 发送MQ信息 topic:send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"834873219640","userId":"user003"},"id":"32228623852","timestamp":1764767955742}
25-12-03.21:19:23.863 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-3] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"834873219640","userId":"user003"},"id":"32228623852","timestamp":1764767955742}
25-12-03.21:19:56.058 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user003"}
25-12-03.21:19:56.528 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-12-03.21:24:57.820 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=5m6s276ms943µs200ns).
25-12-03.21:24:57.823 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=5m6s279ms76µs900ns).
25-12-03.21:24:57.823 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=5m6s279ms109µs500ns).
25-12-03.21:24:57.892 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:24:57.892 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-4] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:24:57.892 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-4] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:24:57.892 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:24:57.893 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-4] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:24:57.893 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-4] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:24:57.900 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:24:57.901 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:24:57.901 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:25:03.397 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 52612 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-03.21:25:03.399 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-12-03.21:25:05.258 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-03.21:25:05.264 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-03.21:25:05.392 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 97 ms. Found 0 Redis repository interfaces.
25-12-03.21:25:08.186 [main            ] INFO  Version                - Redisson 3.23.4
25-12-03.21:25:09.159 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:25:09.180 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:25:16.900 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-03.21:25:17.266 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.21:25:17.532 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#472c9f88:0/SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51714]
25-12-03.21:25:17.806 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 15.142 seconds (JVM running for 16.87)
25-12-03.21:25:18.758 [main            ] INFO  RaffleActivityController - 活动抽奖 userId：user003 activityId：100301
25-12-03.21:25:19.234 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:25:20.078 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:25:20.994 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:25:20.995 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:25:52.869 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-黑名单开始 userId: user003 strategyId:100006 ruleModel:rule_blacklist
25-12-03.21:25:52.981 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:25:56.849 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:25:57.937 [main            ] INFO  BlackListLogicChain    - 抽奖责任链-黑名单命中 userId: user003 strategyId:100006 ruleModel: rule_blacklist awardId:101
25-12-03.21:25:57.942 [main            ] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 user003 100006 rule_blacklist 101
25-12-03.21:26:25.570 [main            ] INFO  EventPublisher         - 发送MQ信息 topic:send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:26:34.685 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:26:36.143 [pool-3-thread-3 ] INFO  EventPublisher         - 发送MQ信息 topic:send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:26:36.146 [pool-3-thread-2 ] INFO  EventPublisher         - 发送MQ信息 topic:send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:26:36.148 [pool-3-thread-6 ] INFO  EventPublisher         - 发送MQ信息 topic:send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:26:37.778 [main            ] INFO  RaffleActivityControllerTest - 请求参数：{"activityId":100301,"userId":"user003"}
25-12-03.21:26:37.797 [main            ] INFO  RaffleActivityControllerTest - 测试结果：{"code":"0000","data":{"awardId":101,"awardIndex":1,"awardTitle":"随机积分"},"info":"成功"}
25-12-03.21:26:37.886 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:26:37.889 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:26:37.891 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:26:43.103 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:26:43.104 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:26:43.104 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:26:43.113 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@6ffdbeef: tags=[[amq.ctag-xaRYbxk02TlP0PCf18OYbg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51714], acknowledgeMode=AUTO local queue size=0
25-12-03.21:26:43.113 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@771cbd13: tags=[[amq.ctag-ejUaL5Q5P9ePtrdGteiZ5g]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,3), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51714], acknowledgeMode=AUTO local queue size=0
25-12-03.21:26:43.116 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@35555145: tags=[[amq.ctag-8Wmr1uRfhlZ97ugry-TtIg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,2), conn: Proxy@5a06eeef Shared Rabbit Connection: SimpleConnection@603c2dee [delegate=amqp://admin@127.0.0.1:5672/, localPort= 51714], acknowledgeMode=AUTO local queue size=0
25-12-03.21:30:07.503 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m32s822ms527µs300ns).
25-12-03.21:30:07.503 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m44s666ms323µs300ns).
25-12-03.21:30:07.513 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m44s673ms627µs300ns).
25-12-03.21:31:37.393 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m29s889ms943µs800ns).
25-12-03.21:31:37.396 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m29s889ms919µs400ns).
25-12-03.21:31:37.396 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m29s882ms497µs900ns).
25-12-03.21:31:37.397 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:31:37.403 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:31:37.403 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:32:57.177 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 61472 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-03.21:32:57.179 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-12-03.21:32:59.159 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-03.21:32:59.175 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-03.21:32:59.302 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88 ms. Found 0 Redis repository interfaces.
25-12-03.21:33:02.246 [main            ] INFO  Version                - Redisson 3.23.4
25-12-03.21:33:03.226 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:33:03.247 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:33:10.362 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-03.21:33:10.708 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.21:33:10.957 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#37a67cf:0/SimpleConnection@50d666a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 60284]
25-12-03.21:33:11.251 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 14.853 seconds (JVM running for 16.471)
25-12-03.21:33:19.634 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:33:22.570 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:33:22.572 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:33:23.691 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:33:24.751 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:33:24.751 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:33:24.756 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:33:27.356 [main            ] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"xxx","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.0904,"userId":"user003"},"userId":"user003"}
25-12-03.21:34:47.178 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:34:47.184 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:36:30.205 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:36:30.208 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m54s186ms464µs600ns).
25-12-03.21:36:30.208 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m54s186ms465µs500ns).
25-12-03.21:36:30.208 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m54s186ms420µs900ns).
25-12-03.21:36:30.222 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:36:30.223 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@4a3509b0: tags=[[amq.ctag-dokbZ_GM4Saxl5_i2XrTdg]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,1), conn: Proxy@1c0cf193 Shared Rabbit Connection: SimpleConnection@50d666a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 60284], acknowledgeMode=AUTO local queue size=0
25-12-03.21:36:30.260 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:37:03.199 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:37:03.199 [SpringApplicationShutdownHook] INFO  DefaultLifecycleProcessor - Failed to shut down 1 bean with phase value 2147483647 within timeout of 30000ms: [org.springframework.amqp.rabbit.config.internalRabbitListenerEndpointRegistry]
25-12-03.21:37:03.200 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@229749f0: tags=[[amq.ctag-Q39JiMO3CX5OQQkbZPho1A]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,3), conn: Proxy@1c0cf193 Shared Rabbit Connection: SimpleConnection@50d666a2 [delegate=amqp://admin@127.0.0.1:5672/, localPort= 60284], acknowledgeMode=AUTO local queue size=0
25-12-03.21:37:04.038 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:37:04.042 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:37:04.043 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:38:53.395 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m16s663ms63µs900ns).
25-12-03.21:38:53.395 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m16s663ms76µs100ns).
25-12-03.21:38:53.395 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m16s663ms46µs).
25-12-03.21:40:10.746 [main            ] INFO  RaffleActivityControllerTest - Starting RaffleActivityControllerTest using Java 1.8.0_462 on DESKTOP-J30R5PM with PID 62432 (started by XduAI in C:\Users\XduAI\Desktop\mystudy\xfg-infra\big-market\big-market-app)
25-12-03.21:40:10.747 [main            ] INFO  RaffleActivityControllerTest - The following 1 profile is active: "dev"
25-12-03.21:40:12.711 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-12-03.21:40:12.719 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-12-03.21:40:12.837 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 88 ms. Found 0 Redis repository interfaces.
25-12-03.21:40:16.118 [main            ] INFO  Version                - Redisson 3.23.4
25-12-03.21:40:17.160 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:40:17.187 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:6379
25-12-03.21:40:23.958 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-12-03.21:40:24.174 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [127.0.0.1:5672]
25-12-03.21:40:24.337 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#37a67cf:0/SimpleConnection@1859e55c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55485]
25-12-03.21:41:14.102 [main            ] INFO  RaffleActivityControllerTest - Started RaffleActivityControllerTest in 64.205 seconds (JVM running for 66.086)
25-12-03.21:41:14.102 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic: send_award message: {"data":{"awardConfig":"0.01,1","awardId":101,"awardTitle":"随机积分","orderId":"076298194854","userId":"user003"},"id":"49700746160","timestamp":1764768357976}
25-12-03.21:41:16.146 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:41:16.147 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:41:17.200 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
25-12-03.21:41:18.092 [pool-3-thread-1 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:41:18.092 [pool-3-thread-2 ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:41:18.097 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
25-12-03.21:41:20.745 [main            ] WARN  AwardRepository        - 更新中奖记录，重复更新拦截 userId:user003 giveOutPrizeAggregate:{"userAwardRecordEntity":{"awardId":101,"awardState":"complete","orderId":"xxx","userId":"user003"},"userCreditAwardEntity":{"creditAmount":0.990,"userId":"user003"},"userId":"user003"}
25-12-03.21:41:32.546 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:41:32.938 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:41:32.938 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
25-12-03.21:41:37.113 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:41:37.111 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
25-12-03.21:41:40.669 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] INFO  SimpleMessageListenerContainer - Workers not finished.
25-12-03.21:41:41.496 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#2-2] WARN  SimpleMessageListenerContainer - Closing channel for unresponsive consumer: Consumer@2c2e5e72: tags=[[amq.ctag-CUW3UCbGhGsR2zuMkJcnVQ]], channel=Cached Rabbit Channel: AMQChannel(amqp://admin@127.0.0.1:5672/,3), conn: Proxy@24258b54 Shared Rabbit Connection: SimpleConnection@1859e55c [delegate=amqp://admin@127.0.0.1:5672/, localPort= 55485], acknowledgeMode=AUTO local queue size=0
25-12-03.21:41:42.182 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:41:42.183 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
25-12-03.21:41:42.183 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
